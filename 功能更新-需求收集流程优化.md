# 功能更新说明 - 需求收集流程优化

**更新时间**：2026-02-06  
**版本**：v1.2.0

---

## 🎉 本次更新内容

### 1. 需求收集页改为项目列表视图 ⭐

**改动前**：
- 直接进入当前项目的需求收集表单
- 需要先在首页选择项目才能收集需求

**改动后**：
- 进入需求收集页先显示所有项目列表
- 每个项目一行，显示基本信息和操作按钮
- 点击"收集需求"进入该项目的表单
- 点击"返回项目列表"可以切换项目

**用户价值**：
- 更灵活：可以快速切换不同项目
- 更直观：一眼看到所有项目的需求收集状态
- 更方便：不需要返回首页切换项目

---

### 2. 需求收集页添加分享功能 ⭐

**位置**：需求收集页 > 项目列表 > 每个项目

**新增功能**：
- "分享表单"下拉菜单
  - 复制链接
  - 生成二维码

**使用场景**：
- 在收集需求时直接分享表单给客户
- 无需跳转到其他页面

---

### 3. 项目首页添加分享功能 ⭐

**位置**：项目首页 > 项目卡片 > 更多菜单

**新增功能**：
- 在"更多"菜单中新增"分享需求表单"选项
- 点击后弹出分享弹窗，提供：
  - 一键复制表单链接
  - 生成并下载二维码
  - 使用说明提示

**用户价值**：
- 在首页就能快速分享表单
- 不需要进入其他页面
- 操作更简便

---

## 📊 功能对比

### 原来的流程
```
想分享表单给客户
    ↓
进入「客户提交」页面
    ↓
点击「复制表单链接」或「生成二维码」
    ↓
分享给客户
```

**问题**：需要记住去"客户提交"页面，不够直观

### 现在的流程（3种方式）

#### 方式1：从首页分享
```
在首页找到项目
    ↓
点击项目卡片的「更多」按钮
    ↓
选择「分享需求表单」
    ↓
复制链接或生成二维码
```

#### 方式2：从需求收集页分享
```
进入「需求收集」页面
    ↓
在项目列表中找到项目
    ↓
点击「分享表单」
    ↓
复制链接或生成二维码
```

#### 方式3：从客户提交页分享（保留）
```
进入「客户提交」页面
    ↓
点击「复制表单链接」或「生成二维码」
```

**优势**：多个入口，随时随地都能分享！

---

## 🎯 使用场景

### 场景1：刚创建项目
```
首页创建项目 → 立即在卡片上分享表单给客户 → 客户填写
```

### 场景2：准备收集需求
```
进入需求收集页 → 看到项目列表 → 直接分享表单 → 客户填写
```

### 场景3：查看客户提交
```
进入客户提交页 → 发现没人填写 → 再次分享表单
```

---

## 💡 设计亮点

### 1. 统一的分享体验
- 所有分享功能使用相同的交互
- 相同的二维码生成逻辑
- 一致的提示信息

### 2. 渐进式展示
- 项目列表 → 简洁展示
- 点击收集需求 → 进入详细表单
- 需要时返回列表 → 灵活切换

### 3. 就近原则
- 在哪里需要分享，就在哪里提供分享功能
- 减少页面跳转
- 提高操作效率

---

## 📝 技术实现

### 文件修改清单
1. **RequirementForm.vue** - 主要改动
   - 添加项目列表视图
   - 使用 `v-if` 切换视图
   - 添加项目选择和返回逻辑
   - 保留原有表单功能

2. **Home.vue** - 次要改动
   - 下拉菜单添加"分享需求表单"选项
   - 添加分享弹窗
   - 复制链接和生成二维码功能

3. **新增文档**
   - `问题4-需求收集流程优化.md` - 详细的问题分析和解决方案

### 核心改动

#### 视图切换逻辑
```javascript
// 使用 selectedProject 控制视图
<div v-if="!selectedProject" class="projects-view">
  <!-- 项目列表 -->
</div>
<div v-else class="form-view">
  <!-- 需求表单 -->
</div>
```

#### 分享功能
```javascript
// 统一的公共表单URL
const publicFormUrl = window.location.origin + '/public-form'

// 复制链接
function copyShareLink() {
  navigator.clipboard.writeText(publicFormUrl)
  ElMessage.success('表单链接已复制到剪贴板')
}

// 生成二维码
function generateShareQRCode() {
  // 动态加载 qrcode.js 库
  // 生成256x256的二维码
}
```

---

## 🔄 待完成功能

### 客户提交记录优化（下一步）
- [ ] 区分"草稿"和"正式提交"
- [ ] 草稿可以继续编辑
- [ ] 添加状态筛选

### 未来可能的优化
- [ ] 项目关联：公共表单可以关联到具体项目
- [ ] 自定义字段：不同项目可以自定义收集内容
- [ ] 数据统计：查看表单填写率
- [ ] 批量操作：批量导入、批量删除

---

## ✅ 测试建议

### 功能测试
1. **项目列表视图**
   - [ ] 创建多个项目，检查列表显示是否正确
   - [ ] 检查已收集/未收集状态标签
   - [ ] 测试时间显示（今天、昨天、n天前）

2. **需求收集流程**
   - [ ] 点击"收集需求"进入表单
   - [ ] 填写并保存表单
   - [ ] 返回项目列表，检查状态是否更新
   - [ ] 切换到另一个项目收集需求

3. **分享功能**
   - [ ] 在首页分享表单
   - [ ] 在需求收集页分享表单
   - [ ] 复制链接后在浏览器打开
   - [ ] 生成二维码并扫描
   - [ ] 下载二维码

### 交互测试
- [ ] 所有按钮点击有反馈
- [ ] 弹窗打开关闭正常
- [ ] 返回列表不丢失数据
- [ ] 移动端显示正常

---

## 📖 相关文档

- [问题4-需求收集流程优化.md](./问题4-需求收集流程优化.md) - 完整的问题分析和解决方案
- [新功能使用说明.md](./新功能使用说明.md) - 公共表单使用说明
- [快速指南.md](./快速指南.md) - 项目快速入门

---

**更新完成** ✅  
**问题记录** 📝 已记录到 `问题4-需求收集流程优化.md`  
**下一步** 🎯 优化客户提交记录的状态展示
