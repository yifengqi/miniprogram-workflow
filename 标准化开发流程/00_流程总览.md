# 📋 小程序AI协作开发 - 标准化流程总览

> 本框架基于星见StelRen小程序项目实践经验提炼，专为"零经验客户+AI协作开发"场景设计

---

## 🎯 核心理念

1. **需求先行**：用结构化问卷确保需求完整、无歧义
2. **双版本PRD**：客户版侧重"能做什么"，开发版侧重"怎么做"
3. **先Demo后迭代**：快速可视化，降低沟通成本
4. **非功能性前置**：合规、安全、性能问题在设计阶段就考虑
5. **经验持续积累**：每个项目的问题和解决方案都记录到知识库

---

## 👥 角色分工

```
┌─────────────────────────────────────────────────────────────────────┐
│  客户  ←→  你（项目负责人）  ←→  AI（开发助手）                       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  客户：提供需求、确认方案、验收成果                                    │
│        ↕ 沟通                                                       │
│  你：收集需求、转达反馈、协调进度、质量把控                             │
│        ↕ 协作                                                       │
│  AI：生成PRD、编写代码、解决技术问题                                   │
│                                                                     │
│  【重要】客户不直接与AI对话，所有沟通通过你转发                         │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 📁 文档结构

```
标准化开发流程/
├── 00_流程总览.md                    # 本文档（流程指引）
├── 01_需求收集模板.md                 # 向客户提问的问题清单
├── 02_PRD客户版模板.md                # 给客户看的功能方案（易懂）
├── 03_PRD开发版模板.md                # 给AI开发的技术文档（精确）
├── 04_Demo快速启动指南.md             # 快速生成可运行Demo
├── 05_迭代优化流程.md                 # 确认→修改→继续的循环
├── 06_非功能性检查清单.md             # 合规/安全/性能/审核等提醒
└── 07_经验知识库.md                   # 问题记录与解决方案（AI自动读取）
```

---

## 🔄 完整流程图

```
┌─────────────────────────────────────────────────────────────────────┐
│                      阶段零：知识库加载                                │
├─────────────────────────────────────────────────────────────────────┤
│  AI自动读取【07_经验知识库】，了解历史项目的问题和解决方案               │
└─────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────┐
│                      阶段一：需求收集                                  │
├─────────────────────────────────────────────────────────────────────┤
│  1. 你使用【01_需求收集模板】向客户提问                                 │
│  2. 客户填写/口述需求，你整理记录                                       │
│  3. 你将整理好的需求信息提供给AI                                        │
└─────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────┐
│                      阶段二：PRD生成                                   │
├─────────────────────────────────────────────────────────────────────┤
│  1. AI根据需求生成【02_PRD客户版】                                      │
│     → 你转发给客户确认功能范围和优先级                                  │
│  2. 你收集客户确认意见后，AI生成【03_PRD开发版】                         │
│     → 包含技术细节、数据库设计、接口定义                                │
└─────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────┐
│                      阶段三：Demo开发                                  │
├─────────────────────────────────────────────────────────────────────┤
│  1. 使用【04_Demo快速启动指南】搭建项目框架                              │
│  2. 实现核心功能（P0级别）                                              │
│  3. 确定UI风格和交互模式                                               │
│  4. 生成可运行Demo，发给客户体验                                        │
└─────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────┐
│                      阶段四：确认与迭代                                 │
├─────────────────────────────────────────────────────────────────────┤
│  使用【05_迭代优化流程】                                               │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │  客户反馈 → 问题分类 → 优先级排序 → 修改实现 → 再次确认     │    │
│  │      ↑                                              │       │    │
│  │      └──────────── 循环直到满意 ─────────────────────┘       │    │
│  └─────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────┐
│                      阶段五：功能完善                                  │
├─────────────────────────────────────────────────────────────────────┤
│  1. 核心功能确认后，添加P1、P2级功能                                    │
│  2. 参考【06_非功能性检查清单】完善安全/性能/合规                        │
│  3. 编写用户指南和管理员手册                                           │
│  4. 最终测试和上线准备                                                 │
└─────────────────────────────────────────────────────────────────────┘
```

---

## ⏱️ 参考时间分配


| 阶段     | 建议时间    | 输出物             |
| ------ | ------- | --------------- |
| 需求收集   | 1-2小时   | 填写完成的需求问卷       |
| PRD生成  | 2-4小时   | 客户版PRD + 开发版PRD |
| Demo开发 | 1-2天    | 可运行的核心功能Demo    |
| 确认迭代   | 每轮1-2小时 | 修改记录、更新的Demo    |
| 功能完善   | 根据功能量   | 完整可上线的小程序       |


---

## 🚨 关键检查点

### 需求阶段必确认

- 小程序类型（工具/电商/社区/服务预约等）
- 核心用户是谁？使用场景是什么？
- 必须有的功能（不能砍）是哪些？
- 是否需要后台管理？管理员是谁？
- 预算和时间约束

### PRD阶段必确认

- 功能优先级排序（P0/P1/P2/P3）
- 页面数量和跳转关系
- 数据需要存储哪些？
- 是否需要微信支付？
- 是否需要微信登录/手机号？

### Demo阶段必确认

- UI风格是否满意？
- 核心操作流程是否顺畅？
- 有无重大遗漏功能？

### 上线前必确认

- 【06_非功能性检查清单】全部过一遍
- 小程序名称、类目已确定
- 隐私协议、用户协议已准备
- 测试账号和测试数据已准备

---

## 💡 工作流程指南

### 新项目启动时

**第一步：你向AI提供背景**
```markdown
你好，我要开发一个新的小程序项目。
请先阅读以下标准化流程文档：
- @标准化开发流程/00_流程总览.md
- @标准化开发流程/07_经验知识库.md

然后我会告诉你客户的需求信息。
```

**第二步：你向客户收集需求**
- 使用【01_需求收集模板】作为提问清单
- 记录客户的回答
- 整理成结构化的需求文档

**第三步：你向AI提供需求，生成PRD**
```markdown
以下是我整理的客户需求信息：
[粘贴你整理的需求信息]

请根据以上信息：
1. 生成【02_PRD客户版】- 我会转发给客户确认
2. 客户确认后再生成【03_PRD开发版】
```

### 客户反馈时

**收集反馈 → 整理 → 转达AI**
```markdown
客户反馈如下：
1. 问题/意见1：...
2. 问题/意见2：...

请根据反馈进行修改。
```

### 项目结束时

**记录经验到知识库**
```markdown
请将本项目遇到的问题和解决方案更新到【07_经验知识库】
```

---

## 📌 经验教训（来自星见项目）

### ✅ 做对的事情

1. **模块化开发**：一个模块完成再开始下一个，避免混乱
2. **详细文档**：每个模块都有独立的完成总结
3. **统一规范**：云函数返回格式、代码风格、命名规范全部统一
4. **先核心后完善**：先跑通主流程，再补充边界情况

### ⚠️ 踩过的坑

1. **SDK版本问题**：wx-server-sdk 必须用 ~2.6.3，不能用 3.x
2. **路径配置**：vite.config.js 的 base 和 router 的 history 必须一致
3. **权限问题**：数据库权限设置不当导致读写失败
4. **非功能性遗漏**：隐私弹窗、权限请求、弱网处理等容易忘记
5. **CSS变量**：不同模块的样式变量要统一定义

### 🎯 最佳实践

1. **每次开发前**：阅读相关文档，理解现有实现
2. **每次修改后**：更新相关文档，保持同步
3. **每个模块完成后**：写完成总结，记录关键点
4. **每次部署前**：过一遍非功能性检查清单

---

**文档版本**：v1.0  
**创建时间**：2026-02-06  
**基于项目**：星见StelRen小程序