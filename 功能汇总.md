# 星见开发工作流 - 功能汇总

> **项目定位**：AI驱动的小程序标准化开发工作流平台  
> **整体自动化程度**：90%  
> **更新时间**：2026-02-06

---

## 一、系统架构总览

```
┌──────────────────────────────────────────────────────────────┐
│                    星见开发工作流系统                           │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  客户端（公共）          管理端（内部）                         │
│  ┌──────────────┐     ┌──────────────────────────────────┐  │
│  │ 需求收集表单   │     │ 项目首页 │ 需求池 │ PRD生成       │  │
│  │ （手机/电脑）  │ ──→ │ Demo代码 │ 迭代管理              │  │
│  │ 智能提示      │     │ 经验库   │ 经验管理 │ 检查清单    │  │
│  └──────────────┘     └──────────────────────────────────┘  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐    │
│  │                   底层引擎                             │    │
│  │  AI任务队列 │ 经验系统 │ GitHub服务 │ 通知服务        │    │
│  └──────────────────────────────────────────────────────┘    │
└──────────────────────────────────────────────────────────────┘
```

---

## 二、完整工作流

```
客户填写需求 → 需求池评估 → AI生成PRD → AI生成Demo → 迭代优化 → 持续进化
     ↓              ↓            ↓            ↓           ↓          ↓
   95%自动       手动筛选      95%自动      90%自动     85%自动    全自动
```

---

## 三、功能模块详解

### 模块1：项目首页 (`/`)

| 功能 | 说明 |
|------|------|
| 快速入口 | 需求池、分享表单、生成PRD 三个卡片 |
| 项目列表 | 显示所有已创建项目 |
| 工作流指引 | 5步流程可视化引导 |
| 分享对话框 | 复制链接 / 生成二维码 |
| 待评估徽章 | 实时显示需求池中待处理数量 |

---

### 模块2：需求收集表单 (`/public-form`) — 客户端

| 功能 | 说明 |
|------|------|
| 公共访问 | 无需登录，手机/电脑均可访问 |
| 7步引导 | 分步填写，降低客户填写门槛 |
| 智能提示 | 根据填写内容实时弹出经验建议 |
| 自动保存 | 草稿自动存储，防止丢失 |
| 一键提交 | 提交后自动进入需求池 |
| 联系方式 | 选填：联系方式、预算、期望时间 |

**表单内容覆盖**：
- 项目背景与目标
- 小程序类型（电商/社区/工具/教育等）
- 目标用户与使用场景
- 功能需求（P0/P1/P2优先级）
- 登录与管理后台需求
- 数据存储与支付需求
- UI风格与技术偏好

**智能提示示例**：
- 填写"支付" → 🔴 弹出三重审核安全警告
- 填写"秒杀" → 🔴 弹出高并发防护提醒
- 填写"电商" → 建议考虑库存/订单/售后
- 填写"抢票" → 提醒法律合规性

---

### 模块3：需求池 (`/requirement-pool`)

| 功能 | 说明 |
|------|------|
| 需求列表 | 分Tab查看：待评估 / 已立项 / 已拒绝 |
| 需求卡片 | 显示项目名、联系方式（脱敏）、预算、时间 |
| 查看详情 | 弹窗展示完整需求表单内容 |
| 立项 | 一键创建项目并触发AI自动生成PRD |
| 拒绝 | 标记不做的需求 |
| 分享入口 | 复制表单链接 / 生成二维码 |
| 待评估徽章 | 侧边栏实时显示待处理数量 |

---

### 模块4：PRD生成 (`/prd`)

| 功能 | 说明 |
|------|------|
| 自动化进度 | 显示AI生成进度（步骤+百分比） |
| 客户版PRD | 面向客户的功能说明文档 |
| 开发版PRD | 面向开发者的技术实现方案 |
| Markdown预览 | 实时渲染Markdown |
| 在线编辑 | 切换编辑模式修改PRD |
| 复制/下载 | 一键复制或下载MD文件 |
| 经验注入 | AI生成时自动参考历史经验（Top 3） |
| 生成Demo | PRD完成后一键触发Demo代码生成 |

**AI自动化流程**：
```
立项 → AI生成客户版PRD（2-3分钟）→ AI生成开发版PRD（3-5分钟）→ 等待确认
```

---

### 模块5：Demo代码 (`/demo`)

| 功能 | 说明 |
|------|------|
| 项目信息卡 | 项目名、文件数、云函数数 |
| 生成进度 | 实时显示AI代码生成进度 |
| 项目结构 | 文件树可视化展示 |
| 代码浏览 | 折叠展开查看每个文件代码 |
| 文件搜索 | 按路径/描述搜索文件 |
| ZIP下载 | 一键打包下载完整项目代码 |
| 单文件操作 | 复制代码 / 下载单个文件 |
| GitHub推送 | 自动创建仓库并推送所有代码 |
| GitHub链接 | 显示仓库地址，一键跳转 |
| 使用说明 | 快速开始步骤和注意事项 |
| 反馈入口 | 跳转到迭代管理提交反馈 |

**AI代码生成内容**：
- 完整的微信小程序页面（.js/.wxml/.wxss/.json）
- 全局配置文件（app.json, project.config.json）
- 云函数代码
- README使用说明

---

### 模块6：迭代管理 (`/iteration`)

| 功能 | 说明 |
|------|------|
| 统计仪表板 | 总迭代数、已完成、处理中、Bug修复数 |
| 提交反馈 | 表单：类型/严重程度/描述/期望行为/实际行为 |
| AI分析 | 自动分类、根因分析、影响文件、复杂度评估 |
| AI方案 | 自动生成代码改动（Before/After对比） |
| 方案详情 | 测试计划、风险提示、最佳实践 |
| 确认应用 | 一键应用所有代码改动 |
| 自动升版 | 智能版本号管理（major/minor/patch） |
| GitHub推送 | 改动后自动推送到GitHub |
| 经验记录 | 每次迭代自动记录到经验库 |
| 状态筛选 | 按状态筛选迭代列表 |
| 重试/删除 | 失败可重试，支持删除 |

**反馈类型**：
- 🐛 Bug修复
- ✨ 新功能
- ⚡ 性能优化
- 🎨 UI改进

**自动化流程**：
```
提交反馈 → AI分析（2-3分钟）→ AI生成方案（5-8分钟）→ 用户确认 → AI应用（1-2分钟）→ 版本升级
```

---

### 模块7：经验知识库 (`/experience`)

| 功能 | 说明 |
|------|------|
| 经验浏览 | 查看所有项目积累的经验 |
| 分类查看 | 按项目、类型、标签查看 |
| 经验详情 | 问题描述、解决方案、教训总结 |

---

### 模块8：经验管理 (`/experience-dashboard`)

| 功能 | 说明 |
|------|------|
| 统计概览 | 总项目数、总经验数、活跃规则数、命中次数 |
| 智能规则管理 | 查看/启用/禁用/删除提示规则 |
| 新增规则 | 自定义触发关键词和提示内容 |
| 标签索引统计 | 标签云展示，查看每个标签下的经验数量 |
| 重建索引 | 一键重建标签索引 |
| 经验列表 | 必读标记、优先级、使用次数 |
| 应用改进 | 从经验中提取规则应用到系统 |

**标签索引体系**：
```
type:电商  │  issue:bug     │  stage:prd_generation
type:社区  │  issue:feature  │  stage:iteration
type:工具  │  fix:logic      │  severity:critical
```

---

### 模块9：检查清单 (`/checklist`)

| 功能 | 说明 |
|------|------|
| 合规审核 | 隐私政策、用户协议、类目选择 |
| 权限检查 | 数据库权限、API权限 |
| 安全检查 | 数据脱敏、输入验证、权限配置 |
| 性能检查 | 首屏加载、滚动流畅、图片压缩 |
| 兼容性 | iOS/Android真机测试 |
| 🔴 支付安全专项 | 三重审核、防0元购买、操作日志 |
| 🔴 高并发专项 | 频率限制、事务锁、队列削峰 |
| 🔴 攻击防范专项 | 防注入、防XSS、防重放、IP黑名单 |

---

### 模块10：设置 (`/settings`)

| 功能 | 说明 |
|------|------|
| AI API配置 | API地址、API Key、模型选择 |
| 连接测试 | 一键测试API是否可用 |
| GitHub Token | 配置GitHub Personal Access Token |

---

## 四、底层引擎

### 1. AI任务队列 (`aiQueue.js`)

| 任务类型 | 功能 | 触发方式 |
|----------|------|---------|
| `generate_prd_client` | 生成客户版PRD | 立项时自动 |
| `generate_prd_dev` | 生成开发版PRD | 客户版完成后自动 |
| `generate_demo` | 生成Demo代码 | 用户点击确认 |
| `analyze_feedback` | 分析用户反馈 | 提交反馈时自动 |
| `generate_solution` | 生成优化方案 | 分析完成后自动 |
| `apply_iteration` | 应用迭代改动 | 用户确认后自动 |
| `run_checklist` | 运行自动检查 | 手动触发 |

**特性**：优先级排序、失败自动重试（最多3次）、实时通知

### 2. 经验系统 (`experience.js`)

| 能力 | 说明 |
|------|------|
| 自动记录 | 项目每个阶段自动记录快照 |
| 问题追踪 | Before/After差异对比 |
| AI总结 | 自动生成经验摘要和教训 |
| 标签索引 | O(1)快速查找相关经验 |
| 三层筛选 | 标签定位 → 重要性过滤 → 相关度排序 |
| 必读标记 | 关键经验强制参考 |
| 智能提示 | 实时匹配规则弹出建议 |
| 经验注入 | AI生成时自动带入Top 3经验 |

### 3. GitHub服务 (`github.js`)

| 能力 | 说明 |
|------|------|
| 创建仓库 | 自动创建私有仓库 |
| 批量推送 | 一次推送所有文件 |
| Token管理 | 自动持久化Token |
| 用户信息 | 获取GitHub账户信息 |
| 仓库列表 | 查看已有仓库 |

### 4. 通知服务 (`aiNotification.js`)

| 通知类型 | 场景 |
|----------|------|
| 任务开始 | AI开始执行任务 |
| 任务进度 | 实时进度更新 |
| 任务完成 | 任务成功完成 |
| 任务失败 | 任务执行出错 |
| 经验应用 | 发现并应用了相关经验 |
| 必读提醒 | 发现必读级别经验 |

---

## 五、数据存储

所有数据存储在浏览器 `localStorage`：

| Key | 内容 | 模块 |
|-----|------|------|
| `projects` | 项目数据（需求、PRD、Demo代码、版本） | project.js |
| `requirement-pool` | 客户提交的需求列表 | requirementPool.js |
| `experiences` | 经验记录 | experience.js |
| `project-logs` | 项目阶段日志 | experience.js |
| `intelligent-rules` | 智能提示规则 | experience.js |
| `tags-index` | 标签索引字典 | experience.js |
| `must-read-experiences` | 必读经验ID列表 | experience.js |
| `iterations` | 迭代记录 | iteration.js |
| `ai-settings` | AI API配置 | settings.js |
| `github_token` | GitHub Token | github.js |

---

## 六、技术栈

| 技术 | 用途 |
|------|------|
| Vue 3 + Composition API | 前端框架 |
| Pinia | 状态管理 |
| Vue Router | 路由管理 |
| Element Plus | UI组件库 |
| Vite | 构建工具 |
| marked | Markdown渲染 |
| JSZip | 代码打包下载 |
| Vercel | 自动化部署 |
| GitHub | 代码托管 |
| OpenAI兼容API | AI能力（中转站） |

---

## 七、文件结构

```
miniprogram-workflow/
├── src/
│   ├── api/
│   │   └── ai.js              # AI API（调用、流式、PRD生成、Demo生成、反馈分析、方案生成）
│   ├── stores/
│   │   ├── project.js          # 项目管理
│   │   ├── requirementPool.js  # 需求池
│   │   ├── experience.js       # 经验系统（标签索引、智能提示、必读标记）
│   │   ├── iteration.js        # 迭代管理
│   │   └── settings.js         # 设置
│   ├── utils/
│   │   ├── aiQueue.js          # AI任务队列（7种任务类型）
│   │   ├── aiNotification.js   # 通知服务
│   │   └── github.js           # GitHub API服务
│   ├── views/
│   │   ├── Home.vue            # 项目首页
│   │   ├── RequirementPool.vue # 需求池
│   │   ├── PublicRequirement.vue # 公共需求表单（客户端）
│   │   ├── PRDGenerator.vue    # PRD生成
│   │   ├── DemoViewer.vue      # Demo代码查看
│   │   ├── IterationManager.vue # 迭代管理
│   │   ├── ExperienceLibrary.vue # 经验知识库
│   │   ├── ExperienceDashboard.vue # 经验管理
│   │   ├── Checklist.vue       # 检查清单
│   │   └── Settings.vue        # 设置
│   ├── router/
│   │   └── index.js            # 路由配置（10个路由）
│   └── App.vue                 # 主布局（侧边栏+路由）
├── 标准化开发流程/               # 开发规范文档
│   ├── 00_流程总览.md
│   ├── 01_需求收集模板.md
│   ├── 02_PRD客户版模板.md
│   ├── 03_PRD开发版模板.md
│   ├── 04_Demo快速启动指南.md
│   ├── 05_迭代优化流程.md
│   ├── 06_非功能性检查清单.md  # 含支付/高并发安全专项
│   ├── 07_经验知识库.md        # 含必读安全经验
│   └── 开发环境测试数据方案.md
├── package.json
├── vite.config.js
└── index.html
```

---

## 八、安全规则（内置）

系统内置7条智能提示规则，客户填写需求时自动触发：

| 规则 | 触发关键词 | 提示级别 |
|------|-----------|---------|
| 积分/支付安全 | 积分、支付、充值、优惠券、红包... | 🔴 必读 |
| 高并发防护 | 秒杀、抢购、限时、限量、库存... | 🔴 必读 |
| API安全 | 接口、API、登录、注册、验证码... | ⚠️ 重要 |
| 抢票合规 | 抢票 | ℹ️ 提示 |
| 电商功能 | 电商 | ℹ️ 提示 |
| 社区合规 | 社区 | ℹ️ 提示 |
| 预约规则 | 预约 | ℹ️ 提示 |

---

## 九、部署方式

```
本地编辑代码 → git push → Vercel自动构建部署（2-3分钟）
```

**无需本地安装依赖**，Vercel自动执行 `npm install` + `npm run build`。

---

## 十、版本历史

| 版本 | 内容 | 自动化 |
|------|------|--------|
| Phase 1 | 需求收集 → PRD生成 + 经验积累 + 标签索引优化 | 95% |
| Phase 2 | PRD → Demo代码生成 + GitHub推送 | 90% |
| Phase 3 | Demo → 迭代优化（分析/方案/应用）+ 用户界面 | 85% |
| 安全增强 | 积分/支付三重审核 + 高并发/攻击防范规则 | — |
| 代码修复 | 重复方法清理、缺失导入修复、导入位置修正 | — |

---

**整体自动化程度：90%**  
**用户只需做**：筛选需求、确认PRD、确认方案  
**AI自动完成**：生成PRD、生成代码、分析问题、生成方案、应用改动、记录经验
